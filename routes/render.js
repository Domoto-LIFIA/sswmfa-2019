var express = require('express');
var router = express.Router();
var sequelize = require('../models/db');
//below autogenerated routes
router.get('/', function (req, res) {
  sequelize.models.TelevisoresListados.findAll().then(recordsFromTelevisoresListados => {
   res.render('rendered/index', { title: 'Index',   recordsFromTelevisoresListados : recordsFromTelevisoresListados });
  });
});

router.get('/page', function(req, res) {
  sequelize.models.Comentarios.findAll().then(recordsFromComentarios => {
   res.render('rendered/page', { title: 'Page',   recordsFromComentarios : recordsFromComentarios });
  });
});

router.post("/insertOneInTelevisoresListados", function(req, res){
  sequelize.models.TelevisoresListados.create({
    Titulo: req.body.Titulo,
    precio: req.body.precio
  })
  .then(()=> {res.redirect('back')})
  .catch(error => {console.log(error);res.redirect('back')});
});

router.get("/updateOneInTelevisoresListados/:id", function(req, res){
  sequelize.models.TelevisoresListados.findById(req.params.id).then(record => {
    res.render("rendered/formUpdateOneInTelevisoresListados", { title: "Update in TelevisoresListados", record : record })
  });
});

router.post("/updateOneInTelevisoresListados", function(req, res){
  sequelize.models.TelevisoresListados.findById(req.body.id).then(record => {
    record.Titulo = req.body.Titulo;
    record.precio = req.body.precio;
    record.save()
    .then(()=> {res.render("rendered/formUpdateOneInTelevisoresListados", { title: "Update in TelevisoresListados", record : record })})
    .catch(error => {console.log(error);res.redirect('back')});
  });
});

router.get("/deleteOneFromTelevisoresListados/:id", function(req, res){
  sequelize.models.TelevisoresListados.findById(req.params.id).then(record => {
    record.destroy().then(()=> {res.redirect('back')})
  });
});

router.get("/detailOfOneFromTelevisoresListados/:id", function(req, res){
  sequelize.models.TelevisoresListados.findById(req.params.id).then(record => {
    res.render("rendered/detailFromTelevisoresListados", { title: "Detail of record from TelevisoresListados", record : record });
  });
});

router.post("/insertOneInComentarios", function(req, res){
  sequelize.models.Comentarios.create({
    texto: req.body.texto
  })
  .then(()=> {res.redirect('back')})
  .catch(error => {console.log(error);res.redirect('back')});
});

router.get("/updateOneInComentarios/:id", function(req, res){
  sequelize.models.Comentarios.findById(req.params.id).then(record => {
    res.render("rendered/formUpdateOneInComentarios", { title: "Update in Comentarios", record : record })
  });
});

router.post("/updateOneInComentarios", function(req, res){
  sequelize.models.Comentarios.findById(req.body.id).then(record => {
    record.texto = req.body.texto;
    record.save()
    .then(()=> {res.render("rendered/formUpdateOneInComentarios", { title: "Update in Comentarios", record : record })})
    .catch(error => {console.log(error);res.redirect('back')});
  });
});

router.get("/deleteOneFromComentarios/:id", function(req, res){
  sequelize.models.Comentarios.findById(req.params.id).then(record => {
    record.destroy().then(()=> {res.redirect('back')})
  });
});

router.get("/detailOfOneFromComentarios/:id", function(req, res){
  sequelize.models.Comentarios.findById(req.params.id).then(record => {
    res.render("rendered/detailFromComentarios", { title: "Detail of record from Comentarios", record : record });
  });
});


module.exports = router;
